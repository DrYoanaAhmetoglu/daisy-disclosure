<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><div class="daisy-title-box">DAISY: AI Disclosure Form for Academic Manuscripts</div></title>
  <style>
    :root { --gap: 14px; --bg: #0f0f12; --fg: #e9e9ee; --muted:#a9a9b5; --card:#16161b; --line:#2a2a33; --accent:#3a86ff; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: var(--bg); color: var(--fg); }
    .wrap { max-width: 980px; margin: 0 auto; padding: 28px 20px 44px; }
    h1 { margin: 0 0 8px; font-size: 1.6rem; }
    p.lead { margin: 0 0 18px; color: var(--muted); }
    fieldset { border: 1px solid var(--line); border-radius: 14px; padding: 16px; margin: 18px 0; background: var(--card); }
    legend { padding: 0 8px; color: var(--muted); }
    label { display: block; margin-bottom: 10px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: var(--gap); }
    .levels { display: flex; flex-wrap: wrap; gap: 12px; }
    input[type="text"], select, textarea { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid var(--line); background: #111117; color: var(--fg); }
    textarea { min-height: 120px; }
    .btns { display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0 0; }
    button { background: var(--accent); color: white; border: none; padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 600; }
    button.secondary { background: #2b2b35; color: var(--fg); }
    .out { border: 1px dashed var(--line); border-radius: 12px; padding: 16px; background: #0b0b10; margin-top: 14px; white-space: pre-wrap; }
    .pill { display: inline-block; padding: 2px 8px; border-radius: 999px; background: #171721; border: 1px solid var(--line); margin-right: 6px; font-size: 12px; color: var(--muted); }
    .muted { color: var(--muted); font-size: 0.95rem; }
    .group { border: 1px solid var(--line); border-radius: 12px; padding: 12px; margin: 10px 0; background: #12121a; }
    .gtitle { font-weight: 700; margin: 0 0 6px; }
    .gdesc { color: var(--muted); margin: 0 0 10px; font-size: 0.95rem; }
    @media (max-width: 760px) { .row { grid-template-columns: 1fr; } }
    .outputs { display: grid; grid-template-columns: 1fr; gap: 16px; }
    .card { border: 1px solid var(--line); border-radius: 12px; padding: 12px; background: #12121a; }
    .card h3 { margin: 0 0 6px; font-size: 1.05rem; }
    .headerline { display:flex; justify-content:space-between; align-items:center; gap:8px; }
    .actions { display:flex; gap:8px; }
    .preview { color: var(--muted); font-size: 0.95rem; margin-top: 6px; }
    .edit-hint { 
      display: inline-block;
      padding: 0 4px;
      border-radius: 6px;
      border: 1px dashed var(--line);
      color: var(--fg);
      background: #0f0f12;
      outline: none;
      cursor: text;
    }
    
    .edit-hint.is-placeholder{
      color: var(--muted);
      background: transparent;
    }
.edit-hint:focus { border-color: var(--accent); box-shadow: 0 0 0 2px rgba(58,134,255,0.25); }
    
  
/* Normalize font size between AI-generated and final statements */
#finalText, #aiText {
  font-size: 1em;
  line-height: 1.45;
}


/* Live editable bracket cues (subtle) */
.edit-hint {
  border-bottom: 1px dotted rgba(0,0,0,0.25);
  padding: 0 2px;
  border-radius: 3px;
}
.edit-hint:focus {
  outline: none;
  background: rgba(0,0,0,0.04);
  border-bottom-color: rgba(0,0,0,0.55);
}
.edit-hint.live-edited {
  background: rgba(0,0,0,0.03);
}
.edit-hint + .live-badge {
  display: none;
  margin-left: 6px;
  font-size: 0.78em;
  color: #666;
}
.edit-hint:focus + .live-badge {
  display: inline;
}



/* --- Alignment fix: align non-question blocks with fieldset content --- */
/* Fieldsets have 16px inner padding; match that offset for top-level text blocks */
.wrap > h1,
.wrap > p.lead {
  padding-left: 16px;
  padding-right: 16px;
}

/* Cards inside fieldsets should align with the fieldset’s inner content */
.card {
  padding: 16px;
}

/* Generated statement / output areas: keep internal edges consistent */
.out {
  padding-left: 16px;
  padding-right: 16px;
}


/* --- Palette v2 (soft contrast, not all white) --- */
:root{
  --bg: #0f172a;            /* slate-900 */
  --panel: #111827;         /* gray-900 */
  --card: #0b1220;          /* deep navy */
  --card2: #0c1a2e;         /* slightly brighter */
  --text: #e5e7eb;          /* gray-200 */
  --muted: #cbd5e1;         /* slate-300 */
  --line: rgba(226,232,240,.18);
  --accent: #38bdf8;        /* sky-400 */
  --accent2: #a78bfa;       /* violet-400 */
  --chip: rgba(56,189,248,.14);
  --shadow: 0 12px 30px rgba(0,0,0,.35);
}

/* Apply palette */
html, body{ background: var(--bg) !important; color: var(--text) !important; }
a{ color: var(--accent) !important; }
.wrap{ background: transparent !important; }

/* Boxes / sections */
fieldset{
  background: var(--panel) !important;
  border: 1px solid var(--line) !important;
  box-shadow: var(--shadow) !important;
}
legend{
  color: var(--muted) !important;
}

/* Group cards (question blocks) */
.group{
  background: var(--card) !important;
  border: 1px solid var(--line) !important;
}

/* Titles & help text */
.gtitle{ color: var(--text) !important; }
.gdesc, .small, .hint, .lead{ color: var(--muted) !important; }

/* Inputs */
input[type="text"], textarea, select{
  background: rgba(255,255,255,.03) !important;
  color: var(--text) !important;
  border: 1px solid var(--line) !important;
}
label{
  color: var(--text) !important;
}
.levels label{
  background: transparent !important;
}
.levels input[type="radio"]:checked + span,
.levels input[type="checkbox"]:checked + span{
  outline: none !important;
}

/* Buttons */
button, .btn, .pill{
  background: var(--chip) !important;
  color: var(--text) !important;
  border: 1px solid rgba(56,189,248,.35) !important;
}
button:hover, .btn:hover{
  border-color: var(--accent) !important;
}

/* Output cards */
.card, .out{
  background: var(--panel) !important;
  border: 1px solid var(--line) !important;
  box-shadow: var(--shadow) !important;
}

/* Subtle focus ring */
:focus-visible{
  outline: 2px solid rgba(56,189,248,.65) !important;
  outline-offset: 2px !important;
}


/* About modal */
.modal { position: fixed; inset: 0; display: none; z-index: 9999; }
.modal.is-open { display: block; }
.modal__backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.55); }
.modal__card {
  position: relative;
  width: min(640px, calc(100% - 32px));
  margin: 8vh auto 0;
  background: #fff;
  color: #111;
  border-radius: 14px;
  padding: 18px 18px 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  line-height: 1.4;
}
.modal__actions {
  margin-top: 16px;
  text-align: right;
}
.modal__card button {
  border: 0;
  border-radius: 10px;
  padding: 10px 14px;
  cursor: pointer;
  background: #111;
  color: #fff;
}


/* FIX: Ensure Continue button text is black even when disabled */
.modal__card button,
.modal__card button:disabled {
  color: #000 !important;
  opacity: 1 !important;
}


/* Help tooltip icon */
.qmark {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  margin-left: 6px;
  border-radius: 50%;
  border: 1px solid rgba(0,0,0,.4);
  font-size: 13px;
  cursor: help;
}
.qmark .tooltip {
  display: none;
  position: absolute;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  background: #222;
  color: #fff;
  padding: 6px 8px;
  border-radius: 4px;
  font-size: 12px;
  line-height: 1.3;
  width: 260px;
  z-index: 10;
}
.qmark:hover .tooltip {
  display: block;
}


/* Make bracketed Low / Medium / High guidance text more subtle */
.edit-hint {
  opacity: 0.5;
}

/* Bring it back to full visibility when editing */
.edit-hint:focus,
.edit-hint.live-edited {
  opacity: 1;
}


/* Clearer info (i) icons */
.qmark {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 1.5px solid #555;
  font-size: 13px;
  font-weight: 600;
  line-height: 1;
}


/* Slight upward alignment tweak for info icons */
.qmark {
  position: relative;
  top: -1.5px;
}


/* Title highlight box */
.daisy-title-box{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,0.22);
  background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  box-shadow:0 10px 24px rgba(0,0,0,0.25);
  letter-spacing:.2px;
}
.daisy-logo{
  width:22px;height:22px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  color:rgba(255,255,255,0.9);
}
.daisy-logo svg{width:22px;height:22px;display:block}
.daisy-title-text{font-size:1.18em;font-weight:650}


/* Expanded intro modal content (DAISY) */
#introModal .modal-content,
.modal#introModal .modal-content {
  max-width: 720px;
}

#introModal .modal-body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}

#introModal .modal-body h2 {
  font-size: 1.15em;
  margin: 0 0 10px 0;
}

#introModal .modal-body h3 {
  font-size: 1.02em;
  margin: 18px 0 6px 0;
  font-weight: 600;
}

#introModal .modal-body p {
  margin: 0 0 10px 0;
  line-height: 1.45;
}

#introModal .modal-body a {
  text-decoration: underline;
}


/* Expanded About (intro) modal */
#aboutModal .modal__card {
  max-width: 760px;
}
#aboutModal .modal__body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}
#aboutModal .modal__body p {
  margin: 0 0 12px 0;
  line-height: 1.45;
}
#aboutModal .modal__body a {
  text-decoration: underline;
}


/* Publisher guidance block (centered, not full-width to page edges) */
.publisher-guidance {
  max-width: 760px;
  margin: 10px auto 0 auto;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  background: rgba(255,255,255,0.03);
}
.publisher-guidance p {
  margin: 0 0 8px 0;
  line-height: 1.4;
}
.publisher-guidance a {
  text-decoration: underline;
  white-space: nowrap;
}


/* Tighter margins for the policy note */
.note-tight,
p.note-tight {
  max-width: 760px;
  margin: 8px auto;
  padding: 6px 10px;
}


/* Smaller, less prominent font for policy note and publisher links */
.policy-note,
.publisher-guidance-inline,
.publisher-guidance-inline a {
  font-size: 0.9em;
}

.publisher-guidance-inline a {
  font-weight: normal;
}


/* Subtle "hand-drawn" style outline around the main form column (no layout change) */
.form-outline{
  position:relative;
  padding:16px 16px 18px;
  border-radius:18px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.12);
}
.form-outline::before{
  content:"";
  position:absolute;
  inset:-10px -10px -12px -10px;
  border-radius:22px;
  border:2px solid rgba(255,255,255,0.16);
  pointer-events:none;
  transform:rotate(-0.18deg);
  box-shadow:0 0 0 1px rgba(0,0,0,0.25) inset;
}
/* Slightly improve visibility of the transparency block inside the outlined area */
.form-outline .transparency-card{
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(226,232,240,0.25);
}
/* Make input text a touch larger inside the transparency block (readability) */
.form-outline .transparency-card input,
.form-outline .transparency-card textarea{
  font-size:1rem;
}

</style>

<style>
/* Hide any header controls/indicators in Statements ONLY */
#statements button,
#statements .actions,
#statements .status,
#statements .pill,
#statements [role="status"],
#statements [aria-live] {
  display: none !important;
}

/* Clearer info (i) icons */
.qmark {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 1.5px solid #555;
  font-size: 13px;
  font-weight: 600;
  line-height: 1;
}


/* Slight upward alignment tweak for info icons */
.qmark {
  position: relative;
  top: -1.5px;
}


/* Title highlight box */
.daisy-title-box {
  display: inline-block;
  padding: 12px 18px;
  margin-bottom: 16px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.18);
  font-size: 1.35em;
  font-weight: 600;
}


/* Expanded intro modal content (DAISY) */
#introModal .modal-content,
.modal#introModal .modal-content {
  max-width: 720px;
}

#introModal .modal-body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}

#introModal .modal-body h2 {
  font-size: 1.15em;
  margin: 0 0 10px 0;
}

#introModal .modal-body h3 {
  font-size: 1.02em;
  margin: 18px 0 6px 0;
  font-weight: 600;
}

#introModal .modal-body p {
  margin: 0 0 10px 0;
  line-height: 1.45;
}

#introModal .modal-body a {
  text-decoration: underline;
}


/* Expanded About (intro) modal */
#aboutModal .modal__card {
  max-width: 760px;
}
#aboutModal .modal__body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}
#aboutModal .modal__body p {
  margin: 0 0 12px 0;
  line-height: 1.45;
}
#aboutModal .modal__body a {
  text-decoration: underline;
}


/* Publisher guidance block (centered, not full-width to page edges) */
.publisher-guidance {
  max-width: 760px;
  margin: 10px auto 0 auto;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  background: rgba(255,255,255,0.03);
}
.publisher-guidance p {
  margin: 0 0 8px 0;
  line-height: 1.4;
}
.publisher-guidance a {
  text-decoration: underline;
  white-space: nowrap;
}


/* Tighter margins for the policy note */
.note-tight,
p.note-tight {
  max-width: 760px;
  margin: 8px auto;
  padding: 6px 10px;
}


/* Smaller, less prominent font for policy note and publisher links */
.policy-note,
.publisher-guidance-inline,
.publisher-guidance-inline a {
  font-size: 0.9em;
}

.publisher-guidance-inline a {
  font-weight: normal;
}

</style>


<style>
/* Two-column layout: form on the left, Statements on the right */
.wrap { max-width: 1200px; margin: 0 auto; padding: 18px 18px 28px; }
.layout{
  display: grid;
  grid-template-columns: minmax(520px, 1.55fr) minmax(320px, 1fr);
  gap: 18px;
  align-items: start;
}
.layout .left { min-width: 0; }
.layout .right{
  position: sticky;
  top: 16px;
  align-self: start;
  max-height: calc(100vh - 32px);
  overflow: auto;
  border-radius: 14px;
  padding: 14px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.03);
  box-shadow: 0 10px 28px rgba(0,0,0,0.25);
}
/* Keep the Statements box visually consistent */
.layout .right fieldset{ margin: 0; }
.layout .right legend{ position: sticky; top: 0; background: rgba(16,20,30,0.92); padding: 8px 10px; border-radius: 10px; }
/* Mobile: stack */
@media (max-width: 980px){
  .layout{ grid-template-columns: 1fr; }
  .layout .right{
    position: static;
    max-height: none;
  }
}

/* Clearer info (i) icons */
.qmark {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 1.5px solid #555;
  font-size: 13px;
  font-weight: 600;
  line-height: 1;
}


/* Slight upward alignment tweak for info icons */
.qmark {
  position: relative;
  top: -1.5px;
}


/* Title highlight box */
.daisy-title-box {
  display: inline-block;
  padding: 12px 18px;
  margin-bottom: 16px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.18);
  font-size: 1.35em;
  font-weight: 600;
}


/* Expanded intro modal content (DAISY) */
#introModal .modal-content,
.modal#introModal .modal-content {
  max-width: 720px;
}

#introModal .modal-body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}

#introModal .modal-body h2 {
  font-size: 1.15em;
  margin: 0 0 10px 0;
}

#introModal .modal-body h3 {
  font-size: 1.02em;
  margin: 18px 0 6px 0;
  font-weight: 600;
}

#introModal .modal-body p {
  margin: 0 0 10px 0;
  line-height: 1.45;
}

#introModal .modal-body a {
  text-decoration: underline;
}


/* Expanded About (intro) modal */
#aboutModal .modal__card {
  max-width: 760px;
}
#aboutModal .modal__body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}
#aboutModal .modal__body p {
  margin: 0 0 12px 0;
  line-height: 1.45;
}
#aboutModal .modal__body a {
  text-decoration: underline;
}


/* Publisher guidance block (centered, not full-width to page edges) */
.publisher-guidance {
  max-width: 760px;
  margin: 10px auto 0 auto;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  background: rgba(255,255,255,0.03);
}
.publisher-guidance p {
  margin: 0 0 8px 0;
  line-height: 1.4;
}
.publisher-guidance a {
  text-decoration: underline;
  white-space: nowrap;
}


/* Tighter margins for the policy note */
.note-tight,
p.note-tight {
  max-width: 760px;
  margin: 8px auto;
  padding: 6px 10px;
}


/* Smaller, less prominent font for policy note and publisher links */
.policy-note,
.publisher-guidance-inline,
.publisher-guidance-inline a {
  font-size: 0.9em;
}

.publisher-guidance-inline a {
  font-weight: normal;
}

</style>


<style>
/* Make the editable statement box a bit taller */
#statements textarea,
#statements .statement-editor textarea,
#statements textarea#editableStatement,
#statements textarea[name="editableStatement"] {
  min-height: 220px !important;
}

/* Clearer info (i) icons */
.qmark {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 1.5px solid #555;
  font-size: 13px;
  font-weight: 600;
  line-height: 1;
}


/* Slight upward alignment tweak for info icons */
.qmark {
  position: relative;
  top: -1.5px;
}


/* Title highlight box */
.daisy-title-box {
  display: inline-block;
  padding: 12px 18px;
  margin-bottom: 16px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.18);
  font-size: 1.35em;
  font-weight: 600;
}


/* Expanded intro modal content (DAISY) */
#introModal .modal-content,
.modal#introModal .modal-content {
  max-width: 720px;
}

#introModal .modal-body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}

#introModal .modal-body h2 {
  font-size: 1.15em;
  margin: 0 0 10px 0;
}

#introModal .modal-body h3 {
  font-size: 1.02em;
  margin: 18px 0 6px 0;
  font-weight: 600;
}

#introModal .modal-body p {
  margin: 0 0 10px 0;
  line-height: 1.45;
}

#introModal .modal-body a {
  text-decoration: underline;
}


/* Expanded About (intro) modal */
#aboutModal .modal__card {
  max-width: 760px;
}
#aboutModal .modal__body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}
#aboutModal .modal__body p {
  margin: 0 0 12px 0;
  line-height: 1.45;
}
#aboutModal .modal__body a {
  text-decoration: underline;
}


/* Publisher guidance block (centered, not full-width to page edges) */
.publisher-guidance {
  max-width: 760px;
  margin: 10px auto 0 auto;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  background: rgba(255,255,255,0.03);
}
.publisher-guidance p {
  margin: 0 0 8px 0;
  line-height: 1.4;
}
.publisher-guidance a {
  text-decoration: underline;
  white-space: nowrap;
}


/* Tighter margins for the policy note */
.note-tight,
p.note-tight {
  max-width: 760px;
  margin: 8px auto;
  padding: 6px 10px;
}


/* Smaller, less prominent font for policy note and publisher links */
.policy-note,
.publisher-guidance-inline,
.publisher-guidance-inline a {
  font-size: 0.9em;
}

.publisher-guidance-inline a {
  font-weight: normal;
}

</style>


<style>
/* Remove ONLY the outer shell around the disclosure statements section */
fieldset.statements-shell{
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
}
fieldset.statements-shell > legend{
  color: var(--text) !important;
  padding: 0 !important;
  margin: 0 0 12px 0 !important;
}
/* Optional: give a little breathing room between the two statement blocks */
fieldset.statements-shell .block,
fieldset.statements-shell .card,
fieldset.statements-shell .group{
  margin-top: 14px;
}

/* Clearer info (i) icons */
.qmark {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 1.5px solid #555;
  font-size: 13px;
  font-weight: 600;
  line-height: 1;
}


/* Slight upward alignment tweak for info icons */
.qmark {
  position: relative;
  top: -1.5px;
}


/* Title highlight box */
.daisy-title-box {
  display: inline-block;
  padding: 12px 18px;
  margin-bottom: 16px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.18);
  font-size: 1.35em;
  font-weight: 600;
}


/* Expanded intro modal content (DAISY) */
#introModal .modal-content,
.modal#introModal .modal-content {
  max-width: 720px;
}

#introModal .modal-body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}

#introModal .modal-body h2 {
  font-size: 1.15em;
  margin: 0 0 10px 0;
}

#introModal .modal-body h3 {
  font-size: 1.02em;
  margin: 18px 0 6px 0;
  font-weight: 600;
}

#introModal .modal-body p {
  margin: 0 0 10px 0;
  line-height: 1.45;
}

#introModal .modal-body a {
  text-decoration: underline;
}


/* Expanded About (intro) modal */
#aboutModal .modal__card {
  max-width: 760px;
}
#aboutModal .modal__body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}
#aboutModal .modal__body p {
  margin: 0 0 12px 0;
  line-height: 1.45;
}
#aboutModal .modal__body a {
  text-decoration: underline;
}


/* Publisher guidance block (centered, not full-width to page edges) */
.publisher-guidance {
  max-width: 760px;
  margin: 10px auto 0 auto;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  background: rgba(255,255,255,0.03);
}
.publisher-guidance p {
  margin: 0 0 8px 0;
  line-height: 1.4;
}
.publisher-guidance a {
  text-decoration: underline;
  white-space: nowrap;
}


/* Tighter margins for the policy note */
.note-tight,
p.note-tight {
  max-width: 760px;
  margin: 8px auto;
  padding: 6px 10px;
}


/* Smaller, less prominent font for policy note and publisher links */
.policy-note,
.publisher-guidance-inline,
.publisher-guidance-inline a {
  font-size: 0.9em;
}

.publisher-guidance-inline a {
  font-weight: normal;
}

</style>


<style>
/* Align the left intro (form instructions) visually with the statement panel */
fieldset.form-intro{
  border: 1px solid rgba(255,255,255,0.10) !important;
  background: rgba(255,255,255,0.03) !important;
  box-shadow: 0 10px 28px rgba(0,0,0,0.25) !important;
  border-radius: 14px !important;
  padding: 14px 16px 16px !important;
  margin: 0 0 16px 0 !important;
}
fieldset.form-intro > legend{
  background: rgba(16,20,30,0.92) !important;
  padding: 8px 12px !important;
  border-radius: 12px !important;
  display: inline-block !important;
}
fieldset.form-intro p.lead{
  margin-top: 10px !important;
}

/* Clearer info (i) icons */
.qmark {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 1.5px solid #555;
  font-size: 13px;
  font-weight: 600;
  line-height: 1;
}


/* Slight upward alignment tweak for info icons */
.qmark {
  position: relative;
  top: -1.5px;
}


/* Title highlight box */
.daisy-title-box {
  display: inline-block;
  padding: 12px 18px;
  margin-bottom: 16px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.18);
  font-size: 1.35em;
  font-weight: 600;
}


/* Expanded intro modal content (DAISY) */
#introModal .modal-content,
.modal#introModal .modal-content {
  max-width: 720px;
}

#introModal .modal-body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}

#introModal .modal-body h2 {
  font-size: 1.15em;
  margin: 0 0 10px 0;
}

#introModal .modal-body h3 {
  font-size: 1.02em;
  margin: 18px 0 6px 0;
  font-weight: 600;
}

#introModal .modal-body p {
  margin: 0 0 10px 0;
  line-height: 1.45;
}

#introModal .modal-body a {
  text-decoration: underline;
}


/* Expanded About (intro) modal */
#aboutModal .modal__card {
  max-width: 760px;
}
#aboutModal .modal__body {
  max-height: 70vh;
  overflow: auto;
  padding-right: 8px;
}
#aboutModal .modal__body p {
  margin: 0 0 12px 0;
  line-height: 1.45;
}
#aboutModal .modal__body a {
  text-decoration: underline;
}


/* Publisher guidance block (centered, not full-width to page edges) */
.publisher-guidance {
  max-width: 760px;
  margin: 10px auto 0 auto;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  background: rgba(255,255,255,0.03);
}
.publisher-guidance p {
  margin: 0 0 8px 0;
  line-height: 1.4;
}
.publisher-guidance a {
  text-decoration: underline;
  white-space: nowrap;
}


/* Tighter margins for the policy note */
.note-tight,
p.note-tight {
  max-width: 760px;
  margin: 8px auto;
  padding: 6px 10px;
}


/* Smaller, less prominent font for policy note and publisher links */
.policy-note,
.publisher-guidance-inline,
.publisher-guidance-inline a {
  font-size: 0.9em;
}

.publisher-guidance-inline a {
  font-weight: normal;
}


/* === Subtle per-question icon linked to the question === */
.gtitle{
  display:flex !important;
  align-items:center !important;
  gap:10px !important;
}
.qicon-link{
  display:inline-flex;
  width:22px;
  height:22px;
  align-items:center;
  justify-content:center;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.18);
  background: rgba(56,189,248,.10);
  flex:0 0 auto;
  text-decoration:none;
}
.qicon-link svg{ width:14px; height:14px; fill: currentColor; }
.qicon-link{ color: rgba(229,231,235,.92); }
.qtitle-text{ display:inline; }

/* === Make the disclosure panel visually distinct (light card) === */
.layout .right{
  background:#ffffff !important;
  color:#111111 !important;
  border: 1px solid rgba(0,0,0,0.12) !important;
  box-shadow: 0 14px 30px rgba(0,0,0,0.22) !important;
}
.layout .right *{ color:#111111; }
.layout .right legend{
  background: transparent !important;
  color:#111111 !important;
  padding: 0 0 10px 0 !important;
}
.layout .right .card{
  background:#f6f7f9 !important;
  border:1px solid #d0d5dd !important;
  box-shadow:none !important;
}
.layout .right .out{
  background:#ffffff !important;
  border:1px dashed #c5cbd3 !important;
  color:#111111 !important;
}
.layout .right textarea{
  background:#ffffff !important;
  border:1px solid #d0d5dd !important;
  color:#111111 !important;
}
.layout .right button.secondary{
  background:#111111 !important;
  color:#ffffff !important;
  border:1px solid #111111 !important;
}
.layout .right button.secondary:hover{
  filter: brightness(1.05);
}


    /* =====================
       TRANSPARENCY DETAILS: make it easier to notice (no layout changes)
       ===================== */
    .transparency-block{
      margin-top: 14px;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(226,232,240,.28);
      background: rgba(255,255,255,.05);
    }
    .transparency-block label{
      font-size: .98rem;
      margin-bottom: 12px;
    }
    .transparency-block input[type="text"]{
      font-size: 1rem;
      padding: 12px 12px;
      background: rgba(255,255,255,.055);
    }
    .transparency-block input::placeholder{
      color: rgba(226,232,240,.58);
    }
    .transparency-block input[type="text"]:focus{
      outline: none;
      border-color: rgba(56,189,248,.65);
      background: rgba(255,255,255,.07);
    }

</style>


<style id="palette-v5-lightform-popstatement">

/* =========================
   PALETTE v6: paper form + editorial statement (no dark panels)
   Goals:
   - Reduce "grey fog" by using a warm paper background + white cards
   - Increase hierarchy via clearer borders/shadows
   - Keep the statement panel popping via structure (border + shadow), not dark color
   ========================= */
:root{
  --bg: #F6F4EF;                 /* warm paper */
  --panel: #FFFFFF;              /* primary surfaces */
  --card: #FFFFFF;
  --text: #111827;               /* near-black */
  --muted: #4B5563;              /* readable grey */
  --line: rgba(17,24,39,.18);    /* stronger lines than before */
  --line2: rgba(17,24,39,.10);
  --accent: #2563EB;             /* calm blue (used sparingly) */
  --shadow: 0 8px 22px rgba(17,24,39,.10);
  --shadow2: 0 12px 30px rgba(17,24,39,.14);
}

/* Page */
html, body{ background: var(--bg) !important; color: var(--text) !important; }
.wrap{ background: transparent !important; }

/* Title box: clean, high contrast */
.daisy-title-box{
  border: 1px solid var(--line) !important;
  background: #FFFFFF !important;
  box-shadow: var(--shadow) !important;
  color: var(--text) !important;
}
.daisy-logo{ color: rgba(17,24,39,.92) !important; }
.daisy-title-text{ color: var(--text) !important; }

/* Left column (form surfaces) */
fieldset,
.group,
.transparency-block{
  background: var(--panel) !important;
  color: var(--text) !important;
  border: 1px solid var(--line) !important;
  box-shadow: var(--shadow) !important;
}

/* Make question blocks feel distinct without being heavy */
.group{
  border-color: var(--line2) !important;
  box-shadow: 0 2px 10px rgba(17,24,39,.06) !important;
}

/* Legends and helper text */
legend{ color: var(--muted) !important; }
.gdesc, .muted, .lead, .helper{ color: var(--muted) !important; }

/* Inputs: crisp */
input[type="text"], textarea, select{
  background: #FFFFFF !important;
  color: var(--text) !important;
  border: 1px solid rgba(17,24,39,.22) !important;
}
input[type="text"]::placeholder, textarea::placeholder{
  color: rgba(75,85,99,.75) !important;
}
input[type="text"]:focus, textarea:focus, select:focus{
  outline: none !important;
  border-color: rgba(37,99,235,.55) !important;
  box-shadow: 0 0 0 3px rgba(37,99,235,.14) !important;
}

/* Reduce blur: subtle chip hover for radio labels */
.levels label{
  padding: 5px 9px !important;
  border-radius: 10px !important;
}
.levels label:hover{
  background: rgba(17,24,39,.04) !important;
}

/* Question icon link: quiet */
.qicon-link{
  border: 1px solid rgba(17,24,39,.16) !important;
  background: rgba(37,99,235,.07) !important;
  color: rgba(17,24,39,.92) !important;
}
.qicon-link:hover{
  background: rgba(37,99,235,.11) !important;
  border-color: rgba(37,99,235,.26) !important;
}

/* Help tooltip icon */
.qmark{
  border: 1.5px solid rgba(17,24,39,.35) !important;
  color: rgba(17,24,39,.80) !important;
  background: rgba(17,24,39,.02) !important;
}
.qmark .tooltip{
  background: #111827 !important;
  color: #FFFFFF !important;
  border: 1px solid rgba(255,255,255,.14) !important;
  box-shadow: 0 12px 26px rgba(0,0,0,.25) !important;
}

/* Form outline: make it essentially invisible on light theme */
.form-outline{ background: transparent !important; border: none !important; }
.form-outline::before{ display:none !important; }

/* Transparency block: tinted so it reads as a new section */
.transparency-block{
  background: rgba(37,99,235,.04) !important;
  border-color: rgba(37,99,235,.20) !important;
  box-shadow: 0 2px 10px rgba(17,24,39,.06) !important;
}

/* =========================
   Right column (statement): editorial "pop" without dark theme
   ========================= */
.layout .right{
  background: #FFFFFF !important;
  color: var(--text) !important;
  border: 2px solid rgba(17,24,39,.85) !important; /* ink border */
  box-shadow: var(--shadow2) !important;
}
.layout .right *{ color: var(--text) !important; }
.layout .right legend{
  color: var(--text) !important;
}

/* Statement cards */
.layout .right .card{
  background: #F9FAFB !important;
  border: 1px solid rgba(17,24,39,.16) !important;
  box-shadow: none !important;
}
.layout .right .out{
  background: #FFFFFF !important;
  border: 1px dashed rgba(17,24,39,.28) !important;
  color: var(--text) !important;
}
.layout .right textarea{
  background: #FFFFFF !important;
  border: 1px solid rgba(17,24,39,.22) !important;
  color: var(--text) !important;
}

/* Buttons: clean, not heavy */
.layout .right button.secondary{
  background: #FFFFFF !important;
  color: var(--text) !important;
  border: 1px solid rgba(17,24,39,.28) !important;
}
.layout .right button.secondary:hover{
  background: rgba(17,24,39,.04) !important;
  border-color: rgba(17,24,39,.42) !important;
}

/* Bracket hint text: keep subtle but readable */
.edit-hint{ opacity: .55 !important; }
.edit-hint:focus, .edit-hint.live-edited{ opacity: 1 !important; }

</style>


<style id="hint-bracket-harmonisation">
/* Harmonise bracket text and editable hint borders across all multiple-choice questions */
:root{
  --hint-bracket-color: rgba(17,24,39,.65); /* medium grey: not black, not washed out */
}

/* Brackets inherit label color → soften labels slightly */
.levels label{
  color: var(--hint-bracket-color) !important;
}

/* Editable hint: match border + text tone */
.levels .edit-hint{
  color: var(--hint-bracket-color) !important;
  border-bottom: 1px dotted var(--hint-bracket-color) !important;
  opacity: 1 !important; /* avoid extra fade */
}

/* Focus/edited state: slightly stronger but same hue */
.levels .edit-hint:focus,
.levels .edit-hint.live-edited{
  color: rgba(17,24,39,.8) !important;
  border-bottom-color: rgba(17,24,39,.8) !important;
}
</style>


<style id="hint-bracket-fix-v10">
/* Make Low / Medium / High labels solid black */
.levels label{
  color: #000000 !important;
}

/* Brackets + hint text at ~70% opacity */
.levels .edit-hint,
.levels .hint-brackets{
  color: rgba(0,0,0,0.7) !important;
}

/* Editable hint underline matches bracket opacity */
.levels .edit-hint{
  border-bottom: 1px dotted rgba(0,0,0,0.7) !important;
  opacity: 1 !important;
}

/* Focus state: slightly stronger but still not black */
.levels .edit-hint:focus,
.levels .edit-hint.live-edited{
  color: rgba(0,0,0,0.8) !important;
  border-bottom-color: rgba(0,0,0,0.8) !important;
}
</style>

</head>
<body>



  <div class="wrap">
    <h1><div class="daisy-title-box">
  <span class="daisy-logo" aria-hidden="true">
    <svg viewBox="0 0 24 24" role="img" focusable="false">
      <g fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="2.2"></circle>
        <path d="M12 2.8c1.4 1.1 2.2 2.6 2.2 4.3S13.4 10 12 10s-2.2-1.2-2.2-2.9S10.6 3.9 12 2.8z"/>
        <path d="M21.2 12c-1.1 1.4-2.6 2.2-4.3 2.2S14 13.4 14 12s1.2-2.2 2.9-2.2 3.2.8 4.3 2.2z"/>
        <path d="M12 21.2c-1.4-1.1-2.2-2.6-2.2-4.3S10.6 14 12 14s2.2 1.2 2.2 2.9-.8 3.2-2.2 4.3z"/>
        <path d="M2.8 12c1.1-1.4 2.6-2.2 4.3-2.2S10 10.6 10 12s-1.2 2.2-2.9 2.2-3.2-.8-4.3-2.2z"/>
      </g>
    </svg>
  </span>
  <span class="daisy-title-text">DAISY: AI Disclosure Form for Academic Manuscripts</span>
</div></h1>
<p class="lead"> </p>
    <p class="lead"></p>
<div class="layout">
  <div class="left form-outline">


    <fieldset class="statements-shell">
      

<div class="helper" style="margin-top: 0.4em;">
  For each activity, select how much AI support was used. You can also add bracketed text to describe what the AI did and where (e.g., “suggested outlines for 2.1, 2.2 and 5.1 sections”).
</div>


      


      <div class="group">
        <p class="gtitle" id="q_brainstorm"><a class="qicon-link" href="#q_brainstorm" aria-label="Link to this question"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 0-4.2 12.6c.6.5 1.2 1.5 1.3 2.4V19a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2c.1-.9.7-1.9 1.3-2.4A7 7 0 0 0 12 2Zm2 17h-4v-1h4v1Zm0-3h-4c-.2-1.3-1-2.8-2-3.6A5 5 0 1 1 16 12.4c-1 .8-1.8 2.3-2 3.6Z"/></svg></a><span class="qtitle-text">Ideation and brainstorming</span></p>
        <p class="gdesc">Examples: ideas for studies; thinking through study design or analysis choices; framings.</p>
        <div class="levels" role="radiogroup" aria-label="Ideation and brainstorming level">
          <label><input type="radio" name="lvl_brain" value="none" checked> None</label>
          <label><input type="radio" name="lvl_brain" value="low"> Low (<span class="edit-hint" contenteditable="true" spellcheck="false">initial suggestions</span>)</label>
          <label><input type="radio" name="lvl_brain" value="med"> Medium (<span class="edit-hint" contenteditable="true" spellcheck="false">research direction or framing</span>)</label>
          <label><input type="radio" name="lvl_brain" value="high"> High (<span class="edit-hint" contenteditable="true" spellcheck="false">major conceptual or drafting contribution</span>)</label>
        </div>
      </div>


      <div class="group">
        <p class="gtitle" id="q_coding"><a class="qicon-link" href="#q_coding" aria-label="Link to this question"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9.2 16.6 5.6 13l3.6-3.6-1.4-1.4L2.8 13l5 5 1.4-1.4Zm5.6 0 1.4 1.4 5-5-5-5-1.4 1.4 3.6 3.6-3.6 3.6ZM13.6 5.2 10 18.8l-1.9-.5 3.6-13.6 1.9.5Z"/></svg></a><span class="qtitle-text">Coding assistance</span></p>
        <p class="gdesc">Examples: debugging, analysis code, data cleaning</p>
        <div class="levels" role="radiogroup" aria-label="Coding assistance level">
          <label><input type="radio" name="lvl_code" value="none" checked> None</label>
          <label><input type="radio" name="lvl_code" value="low"> Low (<span class="edit-hint" contenteditable="true" spellcheck="false">troubleshooting</span>)</label>
          <label><input type="radio" name="lvl_code" value="med"> Medium (<span class="edit-hint" contenteditable="true" spellcheck="false">adapted existing code</span>)</label>
          <label><input type="radio" name="lvl_code" value="high"> High (<span class="edit-hint" contenteditable="true" spellcheck="false">heavily relied on scripts</span>)</label>
        </div>
      </div>


      <div class="group">
        <p class="gtitle" id="q_analysis"><a class="qicon-link" href="#q_analysis" aria-label="Link to this question"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 19h16v2H2V3h2v16Zm4-2H6v-7h2v7Zm5 0h-2V6h2v11Zm5 0h-2v-4h2v4Z"/></svg></a><span class="qtitle-text">Analytical support</span></p>
        <p class="gdesc">Examples: thematic or statistical analysis, suggestions for data visualisations</p>
        <div class="levels" role="radiogroup" aria-label="Analytical support level">
          <label><input type="radio" name="lvl_analysis" value="none" checked> None</label>
          <label><input type="radio" name="lvl_analysis" value="low"> Low (<span class="edit-hint" contenteditable="true" spellcheck="false">limited</span>)</label>
          <label><input type="radio" name="lvl_analysis" value="med"> Medium (<span class="edit-hint" contenteditable="true" spellcheck="false">partial assistance</span>)</label>
          <label><input type="radio" name="lvl_analysis" value="high"> High (<span class="edit-hint" contenteditable="true" spellcheck="false">substantial analytical assistance</span>)</label>
        </div>
      </div>


      <div class="group">
        <p class="gtitle" id="q_drafting"><a class="qicon-link" href="#q_drafting" aria-label="Link to this question"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 20h4l10.5-10.5a2.1 2.1 0 0 0 0-3L16.5 4.5a2.1 2.1 0 0 0-3 0L3 15v5z"></path><path d="M13.5 6.5l4 4"></path></svg></a><span class="qtitle-text">Writing and drafting</span></p>
        <p class="gdesc">Examples: drafting text; restructuring content; producing first‑pass text.</p>
        <div class="levels" role="radiogroup" aria-label="Writing and drafting level">
          <label><input type="radio" name="lvl_draft" value="none" checked> None</label>
          <label><input type="radio" name="lvl_draft" value="low"> Low (<span class="edit-hint" contenteditable="true" spellcheck="false">few sentences</span>)</label>
          <label><input type="radio" name="lvl_draft" value="med"> Medium (<span class="edit-hint" contenteditable="true" spellcheck="false">paragraphs or sections</span>)</label>
          <label><input type="radio" name="lvl_draft" value="high"> High (<span class="edit-hint" contenteditable="true" spellcheck="false">most of manuscript</span>)</label>
        </div>
      </div>


      
      <div class="group">
        <p class="gtitle" id="q_figures"><a class="qicon-link" href="#q_figures" aria-label="Link to this question"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 3h18v18H3z" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M7 15h2v3H7zM11 11h2v7h-2zM15 7h2v11h-2z" fill="currentColor"/></svg></a><span class="qtitle-text">Figures and tables</span></p>
        <p class="gdesc">Examples: generating or revising figures or tables; transforming text or data into visual summaries.</p>
        <div class="levels" role="radiogroup" aria-label="Figures and tables level">
          <label><input type="radio" name="lvl_fig" value="none" checked> None</label>
          <label><input type="radio" name="lvl_fig" value="low"> Low (<span class="edit-hint" contenteditable="true" spellcheck="false">minor suggestions</span>)</label>
          <label><input type="radio" name="lvl_fig" value="med"> Medium (<span class="edit-hint" contenteditable="true" spellcheck="false">drafts or substantial revisions</span>)</label>
          <label><input type="radio" name="lvl_fig" value="high"> High (<span class="edit-hint" contenteditable="true" spellcheck="false">most figures or tables </span>)</label>
        </div>
      </div>


<div class="group">
        <p class="gtitle" id="q_language"><a class="qicon-link" href="#q_language" aria-label="Link to this question"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 4a6 6 0 1 1-4.472 10.01l-2.269 2.27a1 1 0 0 1-1.414-1.415l2.27-2.269A6 6 0 0 1 10 4Zm0 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8Z"/></svg></a><span class="qtitle-text">Language editing and proofreading</span></p>
        <p class="gdesc">Examples: paraphrased sentences, improved grammar, condensed text</p>
        <div class="levels" role="radiogroup" aria-label="Language editing and proofreading level">
          <label><input type="radio" name="lvl_edit" value="none" checked> None</label>
          <label><input type="radio" name="lvl_edit" value="low"> Low (<span class="edit-hint" contenteditable="true" spellcheck="false">few sentences</span>)</label>
          <label><input type="radio" name="lvl_edit" value="med"> Medium (<span class="edit-hint" contenteditable="true" spellcheck="false">paragraphs or sections</span>)</label>
          <label><input type="radio" name="lvl_edit" value="high"> High (<span class="edit-hint" contenteditable="true" spellcheck="false">most of manuscript</span>)</label>
        </div>
      </div>



      <div id="incomplete-note" class="muted" style="margin: 0.25em 0 0.75em; display:none;"></div>
<div class="transparency-block" aria-label="Transparency details">
      <label>Tools used (names & versions)
        <input id="tools" type="text" placeholder="e.g., ChatGPT 5.2; Grammarly">
      </label>
      <div class="row">
        <label>Input data shared with tools (if any)<span class="qmark">?<span class="tooltip">What information you provided to the AI tool (e.g., pasted text, draft excerpts, notes, or de‑identified data). Write “none” if nothing was shared.</span></span>
          <input id="dataShared" type="text" placeholder="e.g., draft text; notes; none">
        </label>
        <label>Safeguards taken<span class="qmark">?<span class="tooltip">Steps taken to reduce risks (e.g., removing identifiers, avoiding sensitive data, using approved tools, disabling training/retention where possible, or following ethics guidance).</span></span>
          <input id="safeguards" type="text" placeholder="e.g., identifiers removed; approved tools">
        </label>
      </div>
      <div class="row">
        <label>Human validation steps<span class="qmark">?<span class="tooltip">How you checked or verified AI outputs (e.g., fact‑checking, re‑running analyses, verifying citations, testing code, or reviewing edits for accuracy).</span></span>
          <input id="validation" type="text" placeholder="e.g., author review; source checks">
        </label>
        <label>Authorship boundaries<span class="qmark">?<span class="tooltip">Clarify how AI use relates to authorship boundaries (e.g., AI did not make substantive intellectual contributions; authors retain full responsibility for ideas, interpretations, and claims).</span></span>
          <input id="boundaries" type="text" placeholder="e.g., AI not an author; full responsibility">
        </label>
      </div>
      </div>

      
</fieldset>

    



    </div>
  <aside class="right" aria-label="Generated statement">
<fieldset class="statements-shell">
      <legend>Your AI Disclosure Statement</legend><div class="btns">
      
      




      
    </div>

        <div class="outputs" id="outputs">
      <div class="card">
        <div class="headerline">
          <h3>Auto-generated</h3>
          <div class="actions">
            <button class="secondary" id="copyDraft">Copy</button>
            <button class="secondary" id="dlDraft">Download .txt</button>
          </div>
        </div>
        <div class="out" id="generatedText"></div>
      </div>

      <div class="card" id="finalCard">
        <div class="headerline">
          <h3>Editable</h3>
          <div class="actions">
            <button class="secondary" id="copyFinal">Copy</button>
            <button class="secondary" id="dlFinal">Download .txt</button>
          </div>
        </div>
        <p class="muted">You can edit this statement here or copy and paste into an LLM to help you edit before copying it into your manuscript. </p>
        <textarea id="finalText" class="out" style="min-height: 220px; width:100%;"></textarea>
      </div>
    </div>

    </fieldset>
  </aside>
</div>

  </div>


  <script>
    const $ = (id) => document.getElementById(id);

    

    function capFirst(s){
      s = (s || '').trim();
      if (!s) return s;
      return s.charAt(0).toUpperCase() + s.slice(1);
    }

    // Editable "example" placeholders: clear on focus, restore when empty.
    // Key: only treat the original example text as a placeholder until the user edits the field.
    function initEditHintPlaceholders() {
      document.querySelectorAll('.edit-hint[contenteditable="true"]').forEach(span => {
        // Store the original default text once
        if (!span.dataset.defaultText) {
          span.dataset.defaultText = (span.textContent || '').trim();
        }

        // Track whether the user has *actively edited* this hint (not just left the placeholder)
        if (!span.dataset.userEdited) span.dataset.userEdited = '';

        // Mark as placeholder initially (since it starts as the default text)
        span.classList.add('is-placeholder');

        span.addEventListener('focus', () => {
          if (span.classList.contains('is-placeholder')) {
            span.textContent = '';
            span.classList.remove('is-placeholder');
            // Do not mark as edited yet; only do that on actual input
          }
        });

        span.addEventListener('blur', () => {
          const t = (span.textContent || '').trim();
          if (t === '') {
            // Restore placeholder example if left empty
            span.textContent = span.dataset.defaultText || '';
            span.classList.add('is-placeholder');
            span.dataset.userEdited = '';
          }
        });

        // Mark as edited on any real input (so even if they type the same words as the example,
        // we still include it in the statement because the user intentionally provided it)
        span.addEventListener('input', () => {
          const t = (span.textContent || '').trim();
          if (t !== '') {
            span.classList.remove('is-placeholder');
            span.dataset.userEdited = 'true';
          }
        });
      });
    }


    function sentenceJoin(parts) { return parts.filter(Boolean).join(' '); }


function debounce(fn, wait) {
  let t;
  return function(...args) {
    clearTimeout(t);
    t = setTimeout(() => fn.apply(this, args), wait);
  };
}


function placeCaretEnd(el){
  try{
    el.focus();
    const range = document.createRange();
    range.selectNodeContents(el);
    range.collapse(false);
    const sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
  }catch(e){}
}



function updateIncompleteNote() {
  const note = document.getElementById('incomplete-note');
  if (!note) return;

  // Consider AI "used" if any of the usage-level questions is not "none"
  const lvlNames = ['lvl_edit','lvl_brain','lvl_analysis','lvl_code','lvl_draft'];
  const anyUse = lvlNames.some(n => {
    const v = document.querySelector(`input[name="${n}"]:checked`)?.value || 'none';
    return v !== 'none';
  });

  const toolsEl = document.getElementById('tools');

  // Optional detail fields (recommended)
  const missing = [];
  const dataEl = document.getElementById('dataShared');
  const safeEl = document.getElementById('safeguards');
  const valEl = document.getElementById('validation');
  const bndEl = document.getElementById('boundaries');

  if (dataEl && dataEl.value.trim() === '') missing.push('Inputs provided');
  if (safeEl && safeEl.value.trim() === '') missing.push('Safeguards');
  if (valEl && valEl.value.trim() === '') missing.push('Human validation steps');
  if (bndEl && bndEl.value.trim() === '') missing.push('Boundaries / limitations');

  const toolsMissing = !!(toolsEl && toolsEl.value.trim() === '');

  // Show a note only when AI usage has been indicated above and something is missing
  if (anyUse && (toolsMissing || missing.length)) {
    note.style.display = 'block';

    let msg = '';
    if (toolsMissing) {
      msg += 'Attention: If any AI usage has been indicated above, disclosure of the AI tool(s) used in the fields below is required by journal and publisher AI policies and should not be left blank. ';
    } else {
      msg += 'Attention: ';
    }

    if (missing.length) {
      msg += 'The remaining fields below are recommended to provide a clearer and more informative AI disclosure: ' + missing.join('; ') + '.';
    } else {
      // If only the required tools field was missing, no extra sentence needed.
      msg = msg.trim();
    }

    note.textContent = msg.trim();
  } else {
    note.style.display = 'none';
    note.textContent = '';
  }
}


    function venuePreamble(v) {
      switch (v) {
        case 'ACM': return 'In line with emerging ACM guidance on generative AI disclosure,';
        case 'IEEE': return 'Consistent with transparency guidance for authors,';
        case 'APA': return 'In accordance with transparency practices,';
        default: return '';
      }
    }

    function levelLabel(code) {
      if (code === 'low') return 'low';
      if (code === 'med') return 'medium';
      if (code === 'high') return 'high';
      return null; // none
    }

    // Existing: list of uses as "name (level)"
    function collectUsesWithLevels() {
      const map = [
        { name: 'language editing and proofreading', group: 'lvl_edit' },
        { name: 'ideation and brainstorming', group: 'lvl_brain' },
        { name: 'coding assistance', group: 'lvl_code' },
        { name: 'analytical support', group: 'lvl_analysis' },
        { name: 'writing and drafting text', group: 'lvl_draft' },
        { name: 'figures and tables', group: 'lvl_fig' },

      ];
      const out = [];
      map.forEach(item => {
        const sel = document.querySelector(`input[name="${item.group}"]:checked`);
        const lvl = sel ? sel.value : 'none';
        const label = levelLabel(lvl);
        if (label) out.push(`${item.name} (${label})`);
      });
      return out;
    }

    // NEW: structured levels so we can interpret patterns
    function collectUseLevelsStructured() {
      const map = [
        { name: 'language editing and proofreading', group: 'lvl_edit' },
        { name: 'ideation and brainstorming', group: 'lvl_brain' },
        { name: 'coding assistance', group: 'lvl_code' },
        { name: 'analytical support', group: 'lvl_analysis' },
        { name: 'writing and drafting text', group: 'lvl_draft' },
        { name: 'figures and tables', group: 'lvl_fig' },

      ];
      const out = [];
      map.forEach(item => {
        const sel = document.querySelector(`input[name="${item.group}"]:checked`);
        const lvl = sel ? sel.value : 'none';
        if (lvl !== 'none') {
        const label = sel.closest('label');
        const span = label ? label.querySelector('.edit-hint') : null;
        const hintText = span ? (span.textContent || '').trim() : '';
        const defText = span ? (span.dataset.defaultText || '').trim() : '';
        const hintChanged = (span && span.dataset && span.dataset.userEdited === 'true' && hintText !== '');
        out.push({ name: item.name, level: lvl, hintText, hintChanged });
      }
      });
      return out;
    }

    function oxfordJoin(list) {
      if (list.length <= 1) return list.join('');
      return list.slice(0, -1).join(', ') + ' and ' + list[list.length - 1];
    }

    // NEW: convert internal low/med/high levels into natural-language scope (no labels in output)
    function levelToScopePhrase(level, kind) {
      // kind: 'manuscript', 'work', 'coding', 'analysis', 'figures'
      if (kind === 'manuscript') {
        if (level === 'low') return 'in a few places in the manuscript';
        if (level === 'med') return 'in some parts of the manuscript';
        if (level === 'high') return 'across most of the manuscript';
      }
      if (kind === 'work') {
        if (level === 'low') return 'occasionally';
        if (level === 'med') return 'in several parts of the work';
        if (level === 'high') return 'throughout much of the work';
      }
      if (kind === 'coding') {
        if (level === 'low') return 'for small coding tasks';
        if (level === 'med') return 'for parts of the coding work';
        if (level === 'high') return 'for a substantial portion of the coding work';
      }
      if (kind === 'analysis') {
        if (level === 'low') return 'in a limited capacity';
        if (level === 'med') return 'for parts of the work';
        if (level === 'high') return 'for a substantial portion of the work';
      }
      if (kind === 'figures') {
        if (level === 'low') return 'for a small number of figures or tables';
        if (level === 'med') return 'for several figures or tables';
        if (level === 'high') return 'for most figures or tables';
      }
      // Fallback
      if (level === 'low') return 'occasionally';
      if (level === 'med') return 'in several parts';
      if (level === 'high') return 'across most of the work';
      return '';
    }

    // NEW: build natural-language purpose phrases (no category labels, no "(high/med/low)")
        // NEW: build natural-language purpose phrases (no category labels, no "(high/med/low)")
    function buildNaturalPurposePhrases(structuredUses) {
      const phrases = [];
      structuredUses.forEach(u => {
        const hint = (u.hintText || '').trim();
        const useHint = !!u.hintChanged && hint !== '';
        const n = u.name;
        const lvl = u.level;

        if (n === 'language editing and proofreading') {
          const base = `improve language and readability ${levelToScopePhrase(lvl, 'manuscript')}`;
          phrases.push(useHint ? `${base} (${hint})` : base);

        } else if (n === 'ideation and brainstorming') {
          const base = `support ideation and brainstorming ${levelToScopePhrase(lvl, 'work')}`;
          phrases.push(useHint ? `${base} (${hint})` : base);

        } else if (n === 'coding assistance') {
          const base = `support coding ${levelToScopePhrase(lvl, 'coding')}`;
          phrases.push(useHint ? `${base} (${hint})` : base);

        } else if (n === 'analytical support') {
          const base = `support analysis ${levelToScopePhrase(lvl, 'analysis')}`;
          phrases.push(useHint ? `${base} (${hint})` : base);

        } else if (n === 'writing and drafting text') {
          const base = `draft or rewrite text ${levelToScopePhrase(lvl, 'manuscript')}`;
          phrases.push(useHint ? `${base} (${hint})` : base);

        } else if (n === 'figures and tables') {
          let base;
          if (lvl === 'low') base = `generate or revise a small number of figures or tables`;
          else if (lvl === 'med') base = `generate or revise several figures or tables`;
          else if (lvl === 'high') base = `generate or revise most figures or tables`;
          else base = `generate or revise figures or tables`;
          phrases.push(useHint ? `${base} (${hint})` : base);
        }
      });
      return phrases;
    }

    // NEW: a brief natural-language overall note (does not list categories or levels)
    function buildOverallUseNote(structuredUses) {
      if (!structuredUses.length) return '';
      const levels = structuredUses.map(u => u.level);
      const hasHigh = levels.includes('high');
      const hasMed = levels.includes('med');
      const hasLow = levels.includes('low');

      if (hasHigh && (hasMed || hasLow)) return '';
      if (hasHigh && !hasMed && !hasLow) return '';
      if (hasMed && hasLow && !hasHigh) return '';
      if (hasMed && !hasHigh && !hasLow) return '';
      if (hasLow && !hasHigh && !hasMed) return '';
      return '';
    }

    // NEW: interpretive note based on low/med/high pattern
    function buildPatternNote(structuredUses) {
      if (!structuredUses.length) return '';

      const high = structuredUses.filter(u => u.level === 'high');
      const med  = structuredUses.filter(u => u.level === 'med');
      const low  = structuredUses.filter(u => u.level === 'low');

      const highNames = oxfordJoin(high.map(u => u.name));
      const medNames  = oxfordJoin(med.map(u => u.name));

      // All high → substantial role overall
      if (high.length && high.length === structuredUses.length) {
        return `AI support formed a substantial part of the workflow for ${highNames}.`;
      }

      // Some high, some other levels → substantial in some areas, lighter elsewhere
      if (high.length) {
        return `AI support was substantial for ${highNames} and lighter for other tasks.`;
      }

      // Only medium levels → moderate role
      if (med.length && !low.length) {
        return 'Overall, AI support played a moderate role across these tasks.';
      }

      // Only low levels → occasional, non-central role
      if (low.length && !med.length) {
        return 'Overall, AI support was occasional and did not play a central role in manuscript preparation.';
      }

      // Mix of medium + low, no high
      if (med.length && low.length) {
        return `AI support provided moderate help for ${medNames} and occasional help for other tasks.`;
      }

      return '';
    }

    // NEW: narrative purposes for acknowledgements (no "(medium)" etc.)
    function buildNarrativePurposes(structuredUses) {
      if (!structuredUses.length) return '';

      const high = structuredUses.filter(u => u.level === 'high').map(u => u.name);
      const med  = structuredUses.filter(u => u.level === 'med').map(u => u.name);
      const low  = structuredUses.filter(u => u.level === 'low').map(u => u.name);

      const nonEmptyLevels = [high.length > 0, med.length > 0, low.length > 0].filter(Boolean).length;

      // Only one level used
      if (nonEmptyLevels === 1) {
        if (high.length) {
          return `for ${oxfordJoin(high)}`;
        }
        if (med.length) {
          return `for ${oxfordJoin(med)}`;
        }
        if (low.length) {
          return `for ${oxfordJoin(low)} (occasional support)`;
        }
      }

      // Multiple levels used
      let text = '';

      if (high.length) {
        text += `primarily for ${oxfordJoin(high)}`;
      } else if (med.length) {
        text += `primarily for ${oxfordJoin(med)}`;
      }

      if (med.length && high.length) {
        text += `, with additional support for ${oxfordJoin(med)}`;
      } else if (med.length && !high.length && low.length) {
        text += `, with additional support for ${oxfordJoin(med)}`;
      }

      if (low.length) {
        text += `${text ? ', and ' : 'with '}occasional support for ${oxfordJoin(low)}`;
      }

      return text;
    }

    function buildBaseParts() {
      const uses = collectUsesWithLevels();
      const structuredUses = collectUseLevelsStructured();

      const tools = ($('tools').value || '').trim();
      const dataShared = ($('dataShared').value || '').trim();
      const safeguards = ($('safeguards').value || '').trim();
      const validation = ($('validation').value || '').trim();
      const boundaries = ($('boundaries').value || '').trim();
      const detail = ($('detail') ? $('detail').value : 'specific');

      const pre = '';
      const purposes = oxfordJoin(buildNaturalPurposePhrases(structuredUses));
      const patternNote = '';
      const narrativePurposes = buildNarrativePurposes(structuredUses);

      return {
        uses,
        structuredUses,
        structuredUses,
        tools,
        dataShared,
        safeguards,
        validation,
        boundaries,
        pre,
        detail,
        purposes,
        patternNote,
        narrativePurposes
      };
    }

    function buildNoAI() {
      return 'The authors declare that no AI or large language model tools were used in the preparation of this manuscript.';
    }

    function buildAcknowledgements(parts) {
      const { pre, tools, dataShared, narrativePurposes, boundaries } = parts;
      if (!parts.uses.length && !tools) return buildNoAI();
      const toolsTxt = tools ? ` (${tools})` : '';
      const dataNote = (!dataShared || /^none$/i.test(dataShared))
        ? 'No personally identifiable data were shared.'
        : 'De-identified materials were used.';

      const purposesClause = narrativePurposes
        ? ` ${narrativePurposes}`
        : '';

            const boundsTxt = (boundaries || '').trim();
      const boundsSentence = boundsTxt
        ? ('Authorship boundaries: ' + (/[.!?]$/.test(boundsTxt) ? boundsTxt : (boundsTxt + '.')))
        : '';

return sentenceJoin([
        pre,
        `the authors used generative AI tools${toolsTxt}${purposesClause}.`,
        dataNote,
        'All outputs were reviewed by the authors.',
        boundsSentence
      ]);
    }

    // NEW: high-level disclosure purposes (activity names only; no scope/intensity language)
    function buildBriefPurposeList(structuredUses) {
      if (!structuredUses.length) return '';
      const names = structuredUses.map(u => {
        if (u.name === 'language editing and proofreading') return 'language editing and proofreading';
        if (u.name === 'ideation and brainstorming') return 'brainstorming and outlining';
        if (u.name === 'coding assistance') return 'coding assistance';
        if (u.name === 'analytical support') return 'analysis and summarisation';
        if (u.name === 'writing and drafting text') return 'writing and drafting text';
        if (u.name === '') return 'drafting text';
        return u.name;
      });
      return oxfordJoin(names);
    }

    function buildBriefDisclosure(parts) {
      // No detailed fields: do not include tools, inputs, safeguards, validation, boundaries
      const purposes = buildBriefPurposeList(parts.structuredUses || []);
      if (!parts.uses.length && !parts.tools) return buildNoAI();
      const purpTxt = purposes ? ` to support ${purposes}` : '';
      return sentenceJoin([
        parts.pre,
        `the authors used generative AI tools in accordance with relevant publication guidelines${purpTxt}.`,
        `The authors reviewed and edited all AI-assisted content and take full responsibility for the final manuscript.`
      ]);
    }

function buildDisclosure(parts) {
      const { pre, tools, purposes, dataShared, safeguards, validation, boundaries, patternNote } = parts;
      if (!parts.uses.length && !tools) return buildNoAI();
      const toolsTxt = tools ? ` (${tools})` : '';
      const dataTxt = (dataShared || '').trim();
      const safeTxt = (safeguards || '').trim();
      const valTxt = (validation || '').trim();
      const boundsTxt = (boundaries || '').trim();
      const s = [
        pre,
        `the authors used generative AI tools${toolsTxt} to ${purposes}.`,
        patternNote
      ];
      if (dataTxt) s.push(`Inputs provided to these tools: ${dataTxt}.`);
      if (safeTxt) s.push(`Safeguards: ${safeTxt}.`);
      if (valTxt) {
        s.push(`All outputs were reviewed and verified by the authors (${valTxt}).`);
      } else {
        s.push('All outputs were reviewed and verified by the authors.');
      }
      if (boundsTxt) {
        const b = (boundsTxt || '').trim();
        const alreadyLabeled = /^authorship(\s+boundaries)?\b/i.test(b);
        const prefixed = alreadyLabeled ? b : `Authorship boundaries: ${b}`;
        const finalB = /[.!?]$/.test(prefixed.trim()) ? prefixed.trim() : (prefixed.trim() + '.');
        s.push(finalB);
      }

      return sentenceJoin(s);

    }

    function buildMethods(parts) {
      const { tools, purposes, dataShared, safeguards, validation, boundaries, patternNote } = parts;
      if (!parts.uses.length && !tools) return buildNoAI();
      const toolsTxt = tools ? tools : '[tools/versions not specified]';
      const dataTxt = (dataShared || '').trim();
      const safeTxt = (safeguards || '').trim();
      const valTxt = (validation || '').trim();
      const boundsTxt = (boundaries || '').trim();
      const boundsSentence = boundsTxt
        ? (/[.!?]$/.test(boundsTxt) ? boundsTxt : (boundsTxt + '.'))
        : '';
      return sentenceJoin([
        `Generative AI assistance was used for ${purposes} via ${toolsTxt}.`,
        patternNote,
        `Inputs: ${dataTxt} with safeguards: ${safeTxt}.`,
        `Outputs were reviewed and, where relevant, independently replicated or cross-checked (${valTxt}).`,
        boundsSentence
      ]);
    }
function generateAll() {
      const parts = buildBaseParts();
      const draft = buildDisclosure(parts);

      $('generatedText').textContent = capFirst(draft);

      // Only overwrite the final statement if the author has not started editing it
      const finalEl = $('finalText');
      if (!finalEl.dataset.edited) {
        finalEl.value = capFirst(draft);
      }

      updateIncompleteNote();
      $('status').textContent = 'Generated';
      setTimeout(() => $('status').textContent = '', 1500);
      }

    // Live updates on any change
    function wireLiveUpdate() {
      const inputs = document.querySelectorAll('input, select, textarea');
      inputs.forEach(el => el.addEventListener('change', generateAll));
      inputs.forEach(el => el.addEventListener('keyup', generateAll));
    }

    function getText(id) {
      const el = $(id);
      if (!el) return '';
      const tag = (el.tagName || '').toUpperCase();
      if (tag === 'TEXTAREA' || tag === 'INPUT') return (el.value || '').trim();
      return (el.textContent || '').trim();
    }

    function copyFrom(id) {
      const txt = getText(id);
      if (!txt) return;
      navigator.clipboard.writeText(txt);
      $('status').textContent = 'Copied';
      setTimeout(() => $('status').textContent = '', 1500);
    }

    function downloadTxt(filename, id) {
      const txt = getText(id);
      const blob = new Blob([txt], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      a.click();
      URL.revokeObjectURL(url);
    }

    
document.addEventListener('DOMContentLoaded', () => {
  initEditHintPlaceholders();
  wireLiveUpdate();

  // Debounced regeneration for bracket edits so typing feels smooth
  const debouncedRegenerate = debounce(() => {
    // Allow auto-updates to keep the final text in sync unless the author has edited it
    generateAll();
  }, 300);

  // Make the bracketed guidance text editable without toggling the radio button
  document.querySelectorAll('.edit-hint').forEach(span => {
    if (!span.dataset.defaultText) span.dataset.defaultText = (span.textContent || '').trim();

    // Prevent clicks inside the editable hint from toggling the parent <label>/<input>
    // (Stopping propagation alone is not enough in some browsers; we also preventDefault
    // on the down event and explicitly focus the editable span.)
    span.addEventListener('pointerdown', (e) => { e.preventDefault(); e.stopPropagation(); placeCaretEnd(span); });
    span.addEventListener('mousedown', (e) => { e.preventDefault(); e.stopPropagation(); placeCaretEnd(span); });
    ['click','mouseup','pointerup'].forEach(evt => {
      span.addEventListener(evt, (e) => { e.stopPropagation(); });
    });

    // Make Enter act like "done" (avoids inserting line breaks)
    span.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') { e.preventDefault(); span.blur(); }
    });

    // Regenerate statement when bracket text changes
    span.addEventListener('input', () => {
      span.classList.add('live-edited');
      // If the author hasn't started editing the final statement, keep it synced
      $('finalText')?.dataset && ( $('finalText').dataset.edited = '' );
      debouncedRegenerate();
    });
  });

  // Update the "missing fields" note live
  ['tools','dataShared','safeguards','validation','boundaries'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener('input', updateIncompleteNote);
  });

  // Generate button (optional manual refresh) — stays visible
  const genBtn = $('gen');
  if (genBtn) {
    genBtn.addEventListener('click', () => {
      // If user presses Generate, treat as "sync to current selections"
      $('finalText')?.dataset && ( $('finalText').dataset.edited = '' );
      generateAll();
    });
  }

  // Track whether the author has started editing the final statement
  const finalEl = $('finalText');
  if (finalEl) {
    finalEl.addEventListener('input', () => { finalEl.dataset.edited = 'true'; });
  }

  // Copy / Download actions (guarded)
  $('copyDraft')?.addEventListener('click', () => copyFrom('generatedText'));
  $('dlDraft')?.addEventListener('click', () => downloadTxt('aid_statement_draft.txt', 'generatedText'));
  $('copyFinal')?.addEventListener('click', () => copyFrom('finalText'));
  $('dlFinal')?.addEventListener('click', () => downloadTxt('aid_statement_final.txt', 'finalText'));

  // Initial render
  generateAll();
});

function isMeaningful(text) {
  if (!text) return false;
  const t = text.trim().toLowerCase();
  if (t === '' || t === 'not specified' || t === 'none' || t === 'few sentences' || t === 'some parts' || t === 'most parts') {
    return false;
  }
  return true;
}


// About DAISY modal: show on load
(function () {
  function openModal() {
    const m = document.getElementById("aboutModal");
    if (!m) return;
    m.classList.add("is-open");
    m.setAttribute("aria-hidden", "false");
  }

  function closeModal() {
    const m = document.getElementById("aboutModal");
    if (!m) return;
    m.classList.remove("is-open");
    m.setAttribute("aria-hidden", "true");
  }

  document.addEventListener("DOMContentLoaded", () => {
    openModal();

    document.getElementById("closeAbout")?.addEventListener("click", closeModal);
    document.querySelector("#aboutModal .modal__backdrop")
      ?.addEventListener("click", closeModal);

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });
  });
})();


// Auto-regenerate statement whenever fields change
['input','change'].forEach(evt => {
  document.addEventListener(evt, (e) => {
    const t = e.target;
    if (!t) return;
    if (t.closest && (t.closest('form') || document.querySelector('form')==null)) {
      try { generateAll(); } catch(err) { /* avoid breaking UX */ }
    }
  }, true);
});
</script>




<p class="policy-note" style="max-width:760px;margin:12px auto 18px auto;padding:0 12px;"><strong>Reminder:</strong> Upon completing the form, please go back to the <a href="https://uclpsych.eu.qualtrics.com/jfe/form/SV_enB8ULvUC998J4W" target="_blank" rel="noopener">Qualtrics</a> survey <strong>without closing this page</strong>, because you will need to copy and paste the statements from this form into the Qualtrics form.</p>

<script>
(function(){
  function silentGenerate(){
    try {
      if (typeof generateStatement === 'function') generateStatement(true);
      else if (typeof updateStatement === 'function') updateStatement(true);
    } catch(e) {}
  }
  window.addEventListener('load', silentGenerate);
  document.addEventListener('change', silentGenerate, true);
  document.addEventListener('input', silentGenerate, true);
})();
</script>


<script>
document.addEventListener('DOMContentLoaded', function () {
  const noteCandidates = Array.from(document.querySelectorAll('p, div, span'))
    .filter(el => el.textContent && el.textContent.trim().startsWith('Attention: Some publishers do not allow'));

  if (!noteCandidates.length) return;

  const noteEl = noteCandidates[0];
  // Tighten layout for the Note so it doesn't run edge-to-edge
  noteEl.style.maxWidth = '720px';
  noteEl.style.margin = '8px auto';
  noteEl.style.padding = '6px 10px';
  noteEl.style.display = 'block';

  if (noteEl.querySelector('.publisher-guidance-inline')) return;

  const box = document.createElement('div');
  box.className = 'publisher-guidance-inline';
  box.innerHTML = ``;
noteEl.insertAdjacentElement('afterend', box);
});
</script>

</body>
</html>
